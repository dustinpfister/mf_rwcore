
var vp=(function(){return{nw:320,nh:240,w:320,h:240,cx:0,cy:0,x:-160,y:-120,z:1,hw:160,hh:120,a:0,f:'rgba(255,255,0,.2)',s:'#ffffff',i:1,lookAt:function(cx,cy){this.cx=cx||this.cx;this.cy=cy||this.cy;this.x=this.cx-this.w/2;this.y=this.cy-this.h/2;},inViewSTBX:function(BXArray,clone){var i=BXArray.length,bx,v=[];while(i--){bx=clone?_.c(BXArray[i]):BXArray[i];if(_.b(this,bx)){v.push(bx);}}
return v;},makeVPRel:function(obj){return{x:obj.x-this.x,y:obj.y-this.y,w:obj.w,h:obj.h};},scaleToFit:function(obj,w,h,x,y){x=x||0;y=y||0;return{x:(obj.x-this.x)/this.w*w+x,y:(obj.y-this.y)/this.h*h+y,w:obj.w/this.w*w,h:obj.h/this.h*h};},scaleForCanvas:function(BXArray,width,height,xOff,yOff){var bxA=this.inViewSTBX(BXArray,true),i=bxA.length,bx;width=width||320;height=height||240;xOff=xOff||0;yOff=yOff||0;while(i--){bx=bxA[i];var nw=bx.w/this.z;var nh=bx.h/this.z;var dw=bx.w-nw;var dh=bx.h-nh;bx.w=nw;bx.h=nh;bx.x+=dw/2+xOff;bx.y+=dw/2+yOff;}
return bxA;},zoom:function(z){this.z=z||this.z;this.w=this.nw*this.z;this.h=this.nh*this.z;this.hw=this.w/2;this.hh=this.h/2;this.lookAt();}};}
());