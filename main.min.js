
var draw=function(){var x,obj,y,w,h;C.cls();S.load.forEach(function(sec){C.hiDraw(function(ctx){obj=vp.makeVPRel({x:sec.x,y:sec.y,w:S.sw,h:S.sh});ctx.strokeStyle='#00ff00';ctx.strokeRect(obj.x,obj.y,obj.w,obj.h);if(sec.pl.length>0){sec.pl.forEach(function(pl){pl=vp.makeVPRel(pl);ctx.strokeStyle='#00ffff';ctx.fillStyle='#0088ff';ctx.strokeRect(pl.x,pl.y,pl.w,pl.h);ctx.fillRect(pl.x,pl.y,pl.w,pl.h);});}
C.drawInfo(['i: '+sec.i,'x,y: '+sec.x+','+sec.y,'X,Y:'+sec.X+','+sec.Y,'pl.length: '+sec.pl.length],obj.x+60,obj.y+60,'','','#00ff00');});});C.hiDraw(function(ctx){rw.ps.units.forEach(function(ship){var obj=_.c(ship),pos=vp.makeVPRel(obj);obj.x=pos.x;obj.y=pos.y;obj.f='#00af88';C.dBX(obj);});rw.es.units.forEach(function(ship){var obj=_.c(ship),pos=vp.makeVPRel(obj);obj.x=pos.x;obj.y=pos.y;obj.s='#000000';obj.f='#af0000';C.dBX(obj);});});C.hiDraw(function(ctx){rw.ps.shots.units.forEach(function(sh){var obj=vp.makeVPRel(sh);ctx.fillStyle='#00afff';ctx.fillRect(obj.x,obj.y,obj.w,obj.h);});});C.drawInfo(['D : '+rw.d.d.toFixed(2),'hellDist: '+rw.d.hellDist,'hellPer: '+rw.d.hellPer,'nextSpawn: '+(rw.d.spawnRate-(new Date()-rw.d.lastSpawn)),'spawnRate: '+rw.d.spawnRate],10,20);},loop=function(){requestAnimationFrame(loop);rw.tick();draw();};rw.init();loop();